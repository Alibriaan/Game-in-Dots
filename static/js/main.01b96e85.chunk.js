(window.webpackJsonpcubiki=window.webpackJsonpcubiki||[]).push([[0],{35:function(e,t,a){e.exports=a(66)},40:function(e,t,a){},41:function(e,t,a){e.exports=a.p+"static/media/logo.25bf045c.svg"},42:function(e,t,a){},43:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(10),s=a.n(o);a(40),a(41),a(42),a(43);var i=a(13),c=a.n(i),u=a(29),d=a(30),m=a(1),l=a(14),f=a.n(l),h=a(11),g=a.n(h),p=function e(){var t=this;Object(d.a)(this,e),this.name="Player",this.currMode={name:"Pick game mode"},this.leaderBoard=void 0,this.squareList=void 0,this.gameStatus=!1,this.score={player:0,computer:0},this.gameClass=new Map,this.changeName=function(e){t.name=e.target.value},this.changeMode=function(e){t.squareList=[];var a=t.mode[e.target.value];t.currMode={name:e.target.value,data:a};var r=new Array(a.field*a.field).fill("nothing");t.squareList=r},this.startGame=function(){"Pick game mode"!==t.currMode.name&&(t.squareList=t.squareList.map((function(){return"nothing"})),t.score={player:0,computer:0},t.gameStatus=!0,t.randCurrBlock())},this.changeColor=function(e){t.squareList=t.squareList.map((function(a,r){return String(r+1)===String(e.currentTarget.dataset.div_id)&&"current"===a?(t.score={player:t.score.player+1,computer:t.score.computer},t.CheckWinner(),"success"):a}))},this.CheckWinner=function(){t.score.player+t.score.computer===+t.currMode.data.field*t.currMode.data.field?(t.gameStatus=!1,fetch("http://starnavi-frontend-test-task.herokuapp.com/winners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({winner:"Tie",date:g()().format("HH:mm; DD MMMM YYYY")})})):+t.score.player>+t.currMode.data.field*t.currMode.data.field/2?(t.gameStatus=!1,fetch("http://starnavi-frontend-test-task.herokuapp.com/winners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({winner:t.name,date:g()().format("HH:mm; DD MMMM YYYY")})})):+t.score.computer>+t.currMode.data.field*t.currMode.data.field/2&&(t.gameStatus=!1,fetch("http://starnavi-frontend-test-task.herokuapp.com/winners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({winner:"Computer",date:g()().format("HH:mm; DD MMMM YYYY")})}))},this.randCurrBlock=function(){for(var e=Math.floor(Math.random()*t.squareList.length);"nothing"!==t.squareList[e];)e=Math.floor(Math.random()*t.squareList.length);var a=t.squareList.map((function(t,a){return String(a)===String(e)?"current":t}));t.squareList=a},this.gameReactions=function(){if(t.squareList=t.squareList.map((function(e,a){return"current"===e?(t.score={player:t.score.player,computer:t.score.computer+1},t.CheckWinner(),"fail"):e})),t.gameStatus){for(var e=Math.floor(Math.random()*t.squareList.length);"nothing"!==t.squareList[e];)e=Math.floor(Math.random()*t.squareList.length);t.squareList=t.squareList.map((function(t,a){return String(a)===String(e)?"current":t}))}},function(){var e=Object(u.a)(c.a.mark((function e(){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("http://starnavi-frontend-test-task.herokuapp.com/game-settings");case 2:for(r in a=e.sent,t.mode=a.data,a.data)t.gameClass.set(r,r);return e.next=7,f.a.get("http://starnavi-frontend-test-task.herokuapp.com/winners");case 7:a=e.sent,t.leaderBoard=a.data;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()};Object(m.h)(p,{mode:m.m,name:m.m,currMode:m.m,leaderBoard:m.m,squareList:m.m,gameStatus:m.m,gameClass:m.m,score:m.m,changeName:m.d,changeMode:m.d,startGame:m.d,changeColor:m.d,CheckWinner:m.d,randCurrBlock:m.d,gameReactions:m.d});var v=new p,M=Object(r.createContext)(v),k=a(34),C=Object(k.a)((function(e){var t=Object(r.useContext)(M);return function(e,t){var a=Object(r.useRef)();Object(r.useEffect)((function(){a.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){!0===t.gameStatus&&t.gameReactions()}),t.gameStatus?t.currMode.data.delay:1e3),Object(r.useEffect)((function(){console.log("Pererender"),console.log("Player-"+t.score.player+"   Computer-"+t.score.computer)})),n.a.createElement("div",{className:"root"},t.leaderBoard||t.squareList?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"game-setings"},n.a.createElement("select",{disabled:t.gameStatus,onChange:t.changeMode},n.a.createElement("option",{selected:!0,hidden:!0},t.currMode.name),Object.keys(t.mode).map((function(e){return n.a.createElement("option",{key:e,value:e},e)})),"}"),n.a.createElement("input",{disabled:t.gameStatus,type:"text",value:String(t.name),onChange:t.changeName}),n.a.createElement("button",{disabled:t.gameStatus,onClick:t.startGame},"PLAY")),n.a.createElement("div",{className:"game-wrapper"},n.a.createElement("div",{className:"field-wrapper"},t.squareList&&t.squareList.map((function(e,a){return"nothing"===e?n.a.createElement("div",{"data-div_id":a+1,key:a+1,onClick:t.changeColor,className:"field-item-"+t.gameClass.get(t.currMode.name)}):"success"===e?n.a.createElement("div",{"data-div_id":a+1,key:a+1,onClick:t.changeColor,className:"field-item-"+t.gameClass.get(t.currMode.name)+" success"}):"current"===e?n.a.createElement("div",{"data-div_id":a+1,key:a+1,onClick:t.changeColor,className:"field-item-"+t.gameClass.get(t.currMode.name)+" current"}):"fail"===e?n.a.createElement("div",{"data-div_id":a+1,key:a+1,onClick:t.changeColor,className:"field-item-"+t.gameClass.get(t.currMode.name)+" fail"}):void 0}))),n.a.createElement("div",{className:"leader-board"},n.a.createElement("h1",null,"Leade Board"),t.leaderBoard.slice(-10).map((function(e){return n.a.createElement("div",null,e.winner," : ",e.date)}))))):n.a.createElement("h1",null,"Loading..."))}));var y=function(){return n.a.createElement(C,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=a(31),E=a(7),L=n.a.createElement(w.a,null,n.a.createElement(E.c,null,n.a.createElement(E.a,{path:"/",exact:!0,component:y})));s.a.render(L,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.01b96e85.chunk.js.map